<%# Value name default %>
<%# If name isn't defined, is created with "Crear" %>
<% name ||= "Crear" %> 
<h1> <%= name %> artículo</h1>
<%= form_for(@article, html: { id:"articles_form"}) do |f|%>
	<%# Show errors to user %>
	<% @article.errors.full_messages.each do |message| %> 
		<div class="be-red white top-space">
			* <%= message %>
		</div>
	<% end %>
	<div class="field">
		<%= f.text_field :title, placeholder:"Título", class:"form-control" %>
	</div>
	<div class="field">
		Portada: <%= f.file_field :cover %>
	</div>
	<div class="field">
		<%= f.hidden_field :body, id:"body-textarea"%>
		<div id="epiceditor" style="height:350px;">
			
		</div>
	</div>
	<div class="field">
		<label>Categorías</label>
		<% @categories.each do |category| %>
		<div class="field">
			<%= check_box_tag "categories[]", category.id %> <%= category.name %>
		</div>
		<% end %>
	</div>
	<div class="field">
		<%= f.submit "Guardar", class:"btn be-red white" %>
	</div>
<% end %>


<!--Initialize the epic editor-->
<script>
	/*Initialize the editor with the name: nuevo_articulo*/
	var editor = new EpicEditor({
		file:{
			name:"nuevo_articulo"
		}
	});

	/*Load the editor with the function load()*/
	editor.load();

	/*Submit: copy the text from editor to the hidden text*/
	$("#articles_form").on("submit", function(){
		$("#body-textarea").val( editor.exportFile("nuevo_articulo", "html") )
	});

</script>